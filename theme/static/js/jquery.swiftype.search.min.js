(function(a){var b=function(a){var b,c,d={};if(a==="")return{};for(b=0;b<a.length;b+=1){c=a[b].split('=');if(c.length===2)d[c[0]]=decodeURIComponent(c[1].replace(/\+/g," "));}return d;};a.queryParams=function(){return b(window.location.search.substr(1).split('&'));};a.hashParams=function(){return b(window.location.hash.substr(1).split('&'));};window.Swiftype=window.Swiftype||{};Swiftype.root_url=Swiftype.root_url||'https://api.swiftype.com';Swiftype.pingUrl=function(a,b){var c=setTimeout(b,350);var d=new Image();d.onload=d.onerror=function(){clearTimeout(c);b();};d.src=a;return false;};Swiftype.pingSearchResultClick=function(b,c,d){var e={t:new Date().getTime(),engine_key:b,doc_id:c,q:Swiftype.currentQuery};var f=Swiftype.root_url+'/api/v1/public/analytics/pc?'+a.param(e);Swiftype.pingUrl(f,d);};a.fn.swiftypeSearch=function(b){var b=a.extend({},a.fn.swiftypeSearch.defaults,b);return this.each(function(){var c=a(this);var d=a.meta?a.extend({},b,c.data()):b;c.data('swiftype-config-search',d);c.selectedCallback=function(b){return function(c){var e=a(this);c.preventDefault();Swiftype.pingSearchResultClick(d.engineKey,b.id,function(){window.location=e.attr('href');});};};c.registerResult=function(b,d){b.data('swiftype-item',d);a('a',b).click(c.selectedCallback(d));};c.getContentCache=function(){return a('#'+g);};var e=a(d.resultContainingElement),f=e.html(),g='st-content-cache',h=c.getContentCache();var i=function(a,b){location.hash="stq="+encodeURIComponent(a)+"&stp="+b;};var j=function(b,c){c=a.extend({page:1},c);var i={};if(!h.length){e.after("<div id='"+g+"' style='display: none;'></div>");h.html(f).hide();}d.loadingFunction(b,e);Swiftype.currentQuery=b;i.q=b;i.engine_key=d.engineKey;i.page=c.page;i.per_page=d.perPage;function j(a){if(a!==undefined){var b=a;if(typeof b==='function')b=b.call();return b;}return undefined;}i.search_fields=j(d.searchFields);i.fetch_fields=j(d.fetchFields);i.facets=j(d.facets);i.filters=j(d.filters);i.document_types=j(d.documentTypes);i.functional_boosts=j(d.functionalBoosts);i.sort_field=j(d.sortField);i.sort_direction=j(d.sortDirection);a.getJSON(Swiftype.root_url+"/api/v1/public/engines/search.json?callback=?",i).success(l);};a(window).hashchange(function(){var b=a.hashParams();if(b.stq)j(b.stq,{page:b.stp});else{var d=c.getContentCache();if(d.length){e.html(d.html());d.remove();}}});var k=c.parents('form');if(k)k.bind('submit',function(a){a.preventDefault();var b=c.val();i(b,1);});a(document).on('click','[data-hash][data-page]',function(b){b.preventDefault();var c=a(this);i(a.hashParams().stq,c.data('page'));});var l=function(a){if(typeof d.preRenderFunction==='function')d.preRenderFunction.call(c,a);d.renderResultsFunction(c.getContext(),a);if(typeof d.postRenderFunction==='function')d.postRenderFunction.call(c,a);};c.getContext=function(){return{config:d,resultContainer:e,registerResult:c.registerResult};};a(window).hashchange();});};var c=function(b,c){var e,f=-1;a.each(c,function(a,b){if(b.num_pages>f){e=a;f=b.num_pages;}});var g=c[e].current_page,h=c[e].num_pages;a(d(e,g,h)).appendTo(b.resultContainer);};var d=function(a,b,c){var d='<div class="st-page">',e,f;if(b!=1){e=b-1;d=d+'<a href="#" class="st-prev" data-hash="true" data-page="'+e+'">&laquo; previous</a>';}if(b<c){f=b+1;d=d+'<a href="#" class="st-next" data-hash="true" data-page="'+f+'">next &raquo;</a>';}d+='</div>';return d;};var e=function(b){return a.trim(b).toLowerCase();};function f(a){return String(a).replace(/&/g,'&amp;').replace(/"/g,'&quot;').replace(/'/g,'&#39;').replace(/</g,'&lt;').replace(/>/g,'&gt;');}var g=function(b,d){var e=b.resultContainer,f=b.config;e.html('');a.each(d.records,function(c,d){a.each(d,function(d,g){b.registerResult(a(f.renderFunction(c,g)).appendTo(e),g);});});c(b,d.info);};var h=function(a,b){return '<div class="st-result"><h3 class="title"><a href="'+b.url+'" class="st-search-result-link">'+f(b.title)+'</a></h3></div>';};var i=function(a,b){b.html('<p class="st-loading-message">loading...</p>');};var j=function(b){var c=0;var d=this.getContext().resultContainer;if(b.info)a.each(b.info,function(a,b){c+=b.total_result_count;});if(c===0)d.html("<div id='st-no-results' class='st-no-results'>No results found.</div>");};a.fn.swiftypeSearch.defaults={attachTo:undefined,documentTypes:undefined,facets:undefined,filters:undefined,engineKey:undefined,searchFields:undefined,functionalBoosts:undefined,sortField:undefined,sortDirection:undefined,fetchFields:undefined,preRenderFunction:undefined,postRenderFunction:j,loadingFunction:i,renderResultsFunction:g,renderFunction:h,perPage:10};})(jQuery);